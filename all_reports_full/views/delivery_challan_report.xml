<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Custom Paper Format for A4 -->
    <record id="paperformat_delivery_challan" model="report.paperformat">
        <field name="name">Delivery Challan A4</field>
        <field name="default" eval="False"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">15</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">96</field>
    </record>

    <!-- Main Report Template -->
    <template id="report_delivery_challan">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <div class="page" style="page-break-after: always;">
                        <style>
                            @page {
                                size: A4 portrait;
                                margin: 5mm;
                            }
                            
                            body {
                                font-family: "Times New Roman", serif;
                                font-size: 16px;
                            }
                            
                            .page {
                                font-family: "Times New Roman", serif;
                                font-size: 16px;
                                width: 100%;
                            }
                            
                            .delivery-challan-table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-top: 0px;
                            }
                            
                            .delivery-challan-table th,
                            .delivery-challan-table td {
                                border: 1px solid #000;
                                padding: 6px 8px;
                                vertical-align: top;
                                font-size: 16px;
                            }
                            
                            .title-row {
                                font-size: 18px;
                                font-weight: bold;
                                text-align: center;
                                padding: 10px !important;
                                background-color: #f5f5f5;
                            }
                            
                            .label-bold {
                                font-weight: bold;
                            }
                            
                            .items-header {
                                text-align: center;
                                font-weight: bold;
                                background-color: #e8e8e8;
                                font-size: 16px;
                                page-break-inside: avoid;
                            }
                            
                            .item-row {
                                page-break-inside: avoid;
                            }
                            
                            .item-row td {
                                padding: 2px 3px;
                                font-size: 16px;
                            }
                            
                            .text-right {
                                text-align: right;
                            }
                            
                            .text-center {
                                text-align: center;
                            }
                            
                            .text-left {
                                text-align: left;
                            }
                            
                            .small-text {
                                font-size: 16px;
                                line-height: 1.5;
                            }
                            
                            .signature-area {
                                padding-top: 20px !important;
                                padding-bottom: 5px !important;
                                page-break-inside: avoid;
                            }
                            
                            .bank-details {
                                line-height: 1.2;
                                font-size: 14px;
                            }
                            
                            .tax-details {
                                line-height: 1.4;
                                font-size: 14px;
                            }
                            
                            .checkbox {
                                display: inline-block;
                                width: 14px;
                                height: 14px;
                                border: 1px solid #000;
                                text-align: center;
                                line-height: 14px;
                                margin-right: 5px;
                                font-size: 16px;
                            }
                            
                            .footer-section {
                                page-break-inside: avoid;
                            }
                            
                            thead {
                                display: table-header-group;
                            }
                            
                            tfoot {
                                display: table-footer-group;
                            }
                        </style>

                        <!-- Header Image and Company Details -->
                        <div>
                            <img src="/all_reports_full/static/src/img/header1.png" 
                                 alt="Company Header" 
                                 style="width: 100%; height: auto; border: 1px solid #000;"/>

                            <table style="width: 100%;">
                                <tr>
                                    <!-- LEFT SIDE - Company Address -->
                                    <td width="65%" style="vertical-align:top; padding:8px; border-left:1px solid #000;">
                                        <div style="line-height:1.6;">
                                            <strong>Plot No. PAP-V-58, Chakan MIDC Phase II</strong><br/>
                                            Wasuli, Khed, Pune 410501 Maharashtra, India.<br/>
                                            <strong>GSTIN :</strong> 27AAECD5705A1Z5<br/>
                                            <strong>CIN :</strong> U20299PN2013FTC146359
                                        </div>
                                    </td>

                                    <!-- RIGHT SIDE - Contact Details -->
                                    <td width="35%" style="vertical-align:top; padding:8px; border-right:1px solid #000; text-align:right;">
                                        <div style="line-height:1.6;">
                                            <strong>Contact Person :</strong>
                                            <span t-if="o.picking_id" t-esc="o.picking_id.company_id.partner_id.name or ''"/>
                                            <span t-if="not o.picking_id and o.company_id" t-esc="o.company_id.partner_id.name or ''"/><br/>

                                            <strong>Contact No :</strong>
                                            <t t-if="o.picking_id">
                                                <span t-esc="o.picking_id.company_id.partner_id.mobile or o.picking_id.company_id.partner_id.phone or ''"/>
                                            </t>
                                            <t t-if="not o.picking_id and o.company_id">
                                                <span t-esc="o.company_id.partner_id.mobile or o.company_id.partner_id.phone or ''"/>
                                            </t><br/>

                                            <strong>Telephone :</strong>
                                            <t t-if="o.picking_id">
                                                <span t-esc="o.picking_id.company_id.partner_id.phone or ''"/>
                                            </t>
                                            <t t-if="not o.picking_id and o.company_id">
                                                <span t-esc="o.company_id.partner_id.phone or ''"/>
                                            </t><br/>

                                            <strong>Email :</strong>
                                            <t t-if="o.picking_id">
                                                <span t-esc="o.picking_id.company_id.partner_id.email or ''"/>
                                            </t>
                                            <t t-if="not o.picking_id and o.company_id">
                                                <span t-esc="o.company_id.partner_id.email or ''"/>
                                            </t><br/>

                                            <strong>Website :</strong>
                                            <t t-if="o.picking_id">
                                                <span t-esc="o.picking_id.company_id.website or ''"/>
                                            </t>
                                            <t t-if="not o.picking_id and o.company_id">
                                                <span t-esc="o.company_id.website or ''"/>
                                            </t>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <table class="delivery-challan-table">
                            <!-- TITLE ROW -->
                            <tr>
                                <td colspan="10" class="title-row">Delivery Challan</td>
                            </tr>

                            <!-- ROW 1: Customer Name & Challan Date -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">Customer Name : </span>
                                    <t t-if="o.picking_id">
                                        <span t-field="o.picking_id.partner_id.name"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.customer_name">
                                        <span t-esc="o.customer_name"/>
                                    </t>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">Challan Date : </span>
                                    <t t-if="o.picking_id and o.picking_id.challan_date">
                                        <span t-field="o.picking_id.challan_date" t-options='{"widget": "date", "format": "dd/MM/yyyy"}'/>
                                    </t>
                                    <t t-if="not o.picking_id and o.document_date">
                                        <span t-field="o.document_date" t-options='{"widget": "date", "format": "dd/MM/yyyy"}'/>
                                    </t>
                                </td>
                            </tr>

                            <!-- ROW 2: Customer Address & E-Way No -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">Customer Address : </span>
                                    <div style="margin-top: 3px;">
                                        <t t-if="o.picking_id">
                                            <t t-set="partner" t-value="o.picking_id.partner_id"/>
                                            <span t-if="partner.street" t-field="partner.street"/>
                                            <span t-if="partner.street2"><br/><span t-field="partner.street2"/></span>
                                            <br t-if="partner.street or partner.street2"/>
                                            <span t-if="partner.city" t-field="partner.city"/><t t-if="partner.city and (partner.state_id or partner.zip)">, </t>
                                            <span t-if="partner.state_id" t-field="partner.state_id.name"/>
                                            <span t-if="partner.zip"> - <span t-field="partner.zip"/></span>
                                            <br t-if="partner.country_id"/>
                                            <span t-if="partner.country_id" t-field="partner.country_id.name"/>
                                        </t>
                                        <t t-if="not o.picking_id and o.customer_address">
                                            <span t-esc="o.customer_address"/>
                                        </t>
                                    </div>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">E-Way No. : </span>
                                    <t t-if="o.ewaybill_id and o.ewaybill_id.name">
                                        <span t-field="o.ewaybill_id.name"/>
                                    </t>
                                    <t t-if="not o.ewaybill_id and o.picking_id and o.picking_id.eway_bill_no">
                                        <span t-field="o.picking_id.eway_bill_no"/>
                                    </t>
                                </td>
                            </tr>

                            <!-- ROW 3: Contact Person & Transport Name -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">Contact Person : </span>
                                    <t t-if="o.picking_id">
                                        <span t-if="o.picking_id.partner_id.contact_person" t-field="o.picking_id.partner_id.contact_person"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.contact_person">
                                        <span t-esc="o.contact_person"/>
                                    </t>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">Transport Name : </span>
                                    <t t-if="o.picking_id and o.picking_id.transport_name">
                                        <span t-field="o.picking_id.transport_name"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.ewaybill_id and o.ewaybill_id.transporter_id">
                                        <span t-field="o.ewaybill_id.transporter_id.name"/>
                                    </t>
                                </td>
                            </tr>

                            <!-- ROW 4: Contact Details & Transport Mode -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">Contact Details : </span>
                                    <t t-if="o.picking_id">
                                        <t t-set="partner" t-value="o.picking_id.partner_id"/>
                                        <span t-if="partner.phone" t-field="partner.phone"/>
                                        <t t-if="partner.phone and partner.mobile"> / </t>
                                        <span t-if="partner.mobile" t-field="partner.mobile"/>
                                    </t>
                                    <t t-if="not o.picking_id">
                                        <span t-if="o.customer_phone" t-esc="o.customer_phone"/>
                                        <t t-if="o.customer_phone and o.customer_mobile"> / </t>
                                        <span t-if="o.customer_mobile" t-esc="o.customer_mobile"/>
                                    </t>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">Transport Mode : </span>
                                    <t t-if="o.picking_id and o.picking_id.transport_mode">
                                        <t t-if="o.picking_id.transport_mode == 'road'">Road</t>
                                        <t t-elif="o.picking_id.transport_mode == 'air'">Air</t>
                                        <t t-elif="o.picking_id.transport_mode == 'sea'">Sea</t>
                                        <t t-elif="o.picking_id.transport_mode == 'rail'">Rail</t>
                                    </t>
                                    <t t-if="not o.picking_id and o.transport_mode">
                                        <t t-if="o.transport_mode == 'road'">Road</t>
                                        <t t-elif="o.transport_mode == 'air'">Air</t>
                                        <t t-elif="o.transport_mode == 'sea'">Sea</t>
                                        <t t-elif="o.transport_mode == 'rail'">Rail</t>
                                    </t>
                                    <t t-if="o.ewaybill_id and o.ewaybill_id.mode">
                                        <t t-if="o.ewaybill_id.mode == '1'">Road</t>
                                        <t t-elif="o.ewaybill_id.mode == '2'">Rail</t>
                                        <t t-elif="o.ewaybill_id.mode == '3'">Air</t>
                                        <t t-elif="o.ewaybill_id.mode == '4'">Ship</t>
                                    </t>
                                </td>
                            </tr>

                            <!-- ROW 5: Email Address & Vehicle No -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">Email Address : </span>
                                    <t t-if="o.picking_id">
                                        <span t-if="o.picking_id.partner_id.email" t-field="o.picking_id.partner_id.email"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.customer_email">
                                        <span t-esc="o.customer_email"/>
                                    </t>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">Vehicle No : </span>
                                    <t t-if="o.picking_id and o.picking_id.vehicle_no">
                                        <span t-field="o.picking_id.vehicle_no"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.vehicle_no">
                                        <span t-esc="o.vehicle_no"/>
                                    </t>
                                    <t t-if="o.ewaybill_id and o.ewaybill_id.vehicle_no">
                                        <span t-field="o.ewaybill_id.vehicle_no"/>
                                    </t>
                                </td>
                            </tr>

                            <!-- ROW 6: GSTIN & Challan Type -->
                            <tr>
                                <td colspan="6">
                                    <span class="label-bold">GSTIN : </span>
                                    <t t-if="o.picking_id">
                                        <span t-if="o.picking_id.partner_id.vat" t-field="o.picking_id.partner_id.vat"/>
                                    </t>
                                    <t t-if="not o.picking_id and o.customer_gstin">
                                        <span t-esc="o.customer_gstin"/>
                                    </t>
                                </td>
                                <td colspan="4">
                                    <span class="label-bold">Challan Type (Tick on FOC/Paid): </span>
                                    <span class="checkbox"><t t-if="o.challan_type == 'foc'">✓</t></span> FOC
                                    <span style="margin-left: 20px;">
                                        <span class="checkbox"><t t-if="o.challan_type == 'paid'">✓</t></span> PAID
                                    </span>
                                </td>
                            </tr>

                            <!-- ITEMS HEADER -->
                            <tr class="items-header">
                                <th style="width: 5%;">S. No.</th>
                                <th colspan="2" style="width: 25%;">Item Description</th>
                                <th style="width: 10%;">HSN Code</th>
                                <th style="width: 8%;">Qty.</th>
                                <th style="width: 8%;">UOM</th>
                                <th style="width: 10%;">Unit Price</th>
                                <th style="width: 10%;">Amount</th>
                                <th style="width: 8%;">Discount</th>
                                <th style="width: 16%;">Total Amount</th>
                            </tr>

                            <!-- ITEMS DATA ROWS - From stock.move -->
                            <t t-set="line_number" t-value="0"/>
                            <t t-set="total_quantity" t-value="0"/>
                            <t t-set="sub_total" t-value="0"/>
                            
                            <t t-if="o.picking_id">
                                <!-- If we have picking_id, iterate through move_ids_without_package -->
                                <t t-foreach="o.picking_id.move_ids_without_package" t-as="line">
                                    <t t-set="line_number" t-value="line_number + 1"/>
                                    <t t-set="total_quantity" t-value="total_quantity + (line.quantity or line.product_uom_qty or 0)"/>
                                    
                                    <!-- Calculate line price from sale order if available -->
                                    <t t-set="unit_price" t-value="0"/>
                                    <t t-set="line_total" t-value="0"/>
                                    <t t-if="o.picking_id.sale_id">
                                        <t t-foreach="o.picking_id.sale_id.order_line" t-as="so_line">
                                            <t t-if="so_line.product_id.id == line.product_id.id">
                                                <t t-set="unit_price" t-value="so_line.price_unit"/>
                                                <t t-set="line_total" t-value="so_line.price_subtotal"/>
                                            </t>
                                        </t>
                                    </t>
                                    <t t-set="sub_total" t-value="sub_total + line_total"/>
                                    
                                    <tr class="item-row">
                                        <td class="text-center"><t t-esc="line_number"/></td>
                                        <td colspan="2" class="text-left">
                                            <span t-field="line.product_id.name"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-if="line.product_id.l10n_in_hsn_code" 
                                                  t-field="line.product_id.l10n_in_hsn_code"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-esc="'%.2f' % (line.quantity or line.product_uom_qty or 0)"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-if="line.product_uom" t-field="line.product_uom.name"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="'%.2f' % unit_price"/>
                                        </td>
                                        <td class="text-right">
                                            <t t-set="line_amount" t-value="(line.quantity or line.product_uom_qty or 0) * unit_price"/>
                                            <span t-esc="'%.2f' % line_amount"/>
                                        </td>
                                        <td class="text-right">
                                            <!-- Discount from sale order line if available -->
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="'%.2f' % line_total"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>

                            <t t-if="not o.picking_id and o.move_line_ids">
                                <!-- Fallback to move_line_ids from delivery.challan.report model -->
                                <t t-foreach="o.move_line_ids" t-as="line">
                                    <t t-set="line_number" t-value="line_number + 1"/>
                                    <t t-set="total_quantity" t-value="total_quantity + (line.quantity or line.product_uom_qty or 0)"/>
                                    
                                    <tr class="item-row">
                                        <td class="text-center"><t t-esc="line_number"/></td>
                                        <td colspan="2" class="text-left">
                                            <span t-field="line.product_id.name"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-if="line.product_id.l10n_in_hsn_code" 
                                                  t-field="line.product_id.l10n_in_hsn_code"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-esc="'%.2f' % (line.quantity or line.product_uom_qty or 0)"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-if="line.product_uom" t-field="line.product_uom.name"/>
                                        </td>
                                        <td class="text-right">0.00</td>
                                        <td class="text-right">0.00</td>
                                        <td class="text-right"></td>
                                        <td class="text-right">0.00</td>
                                    </tr>
                                </t>
                            </t>

                            <!-- TOTAL QUANTITY ROW -->
                            <tr class="footer-section">
                                <td colspan="4" class="text-right label-bold">Total Qty.</td>
                                <td colspan="2" class="text-center label-bold">
                                    <t t-esc="'%.2f' % total_quantity"/>
                                </td>
                                <td class="text-right label-bold">Nos.</td>
                                <td colspan="3" class="text-right label-bold">
                                    Sub Total Amount: 
                                    <t t-if="o.picking_id and o.picking_id.sale_id">
                                        <span t-field="o.picking_id.sale_id.amount_untaxed" 
                                              t-options='{"widget": "monetary", "display_currency": o.picking_id.sale_id.currency_id}'/>
                                    </t>
                                    <t t-if="not o.picking_id or not o.picking_id.sale_id">
                                        <span t-esc="'%.2f' % sub_total"/>
                                    </t>
                                </td>
                            </tr>

                            <!-- BANK DETAILS & TAX SECTION -->
                            <tr class="footer-section">
                                <td colspan="5" class="bank-details" style="vertical-align: top;">
                                    <div class="label-bold" style="margin-bottom: 5px;">Company Bank Details:</div>
                                    <div><strong>Bank Name :</strong> Deutsche Bank</div>
                                    <div><strong>Bank A/C :</strong> 6002406-00-0</div>
                                    <div><strong>Bank IFSC Code :</strong> DEUT0537PUN</div>
                                    <div><strong>Branch Location :</strong> Aundh</div>
                                    <div>
                                        <strong>Company PAN No. :</strong> 
                                        <t t-if="o.picking_id">
                                            <span t-if="o.picking_id.company_id.vat" t-field="o.picking_id.company_id.vat"/>
                                        </t>
                                        <t t-if="not o.picking_id and o.company_id">
                                            <span t-if="o.company_id.vat" t-field="o.company_id.vat"/>
                                        </t>
                                    </div>
                                </td>
                                <td colspan="5" class="tax-details" style="vertical-align: top;">
                                    <!-- Calculate taxes from sale order -->
                                    <t t-set="sgst_amount" t-value="0"/>
                                    <t t-set="cgst_amount" t-value="0"/>
                                    <t t-set="igst_amount" t-value="0"/>
                                    
                                    <t t-if="o.picking_id and o.picking_id.sale_id">
                                        <t t-foreach="o.picking_id.sale_id.order_line" t-as="so_line">
                                            <t t-foreach="so_line.tax_id" t-as="tax">
                                                <t t-set="tax_amount" t-value="so_line.price_subtotal * tax.amount / 100"/>
                                                <t t-if="'SGST' in tax.name.upper() or 'S.G.S.T' in tax.name.upper()">
                                                    <t t-set="sgst_amount" t-value="sgst_amount + tax_amount"/>
                                                </t>
                                                <t t-if="'CGST' in tax.name.upper() or 'C.G.S.T' in tax.name.upper()">
                                                    <t t-set="cgst_amount" t-value="cgst_amount + tax_amount"/>
                                                </t>
                                                <t t-if="'IGST' in tax.name.upper() or 'I.G.S.T' in tax.name.upper()">
                                                    <t t-set="igst_amount" t-value="igst_amount + tax_amount"/>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                    
                                    <!-- Display taxes -->
                                    <div>
                                        <strong>SGST@:</strong>
                                        <span style="float: right;">
                                            <t t-esc="'%.2f' % (o.sgst_total or sgst_amount or 0)"/>
                                        </span>
                                    </div>
                                    
                                    <div>
                                        <strong>CGST@:</strong>
                                        <span style="float: right;">
                                            <t t-esc="'%.2f' % (o.cgst_total or cgst_amount or 0)"/>
                                        </span>
                                    </div>
                                    
                                    <div t-if="(o.igst_total or igst_amount or 0) > 0">
                                        <strong>IGST@:</strong>
                                        <span style="float: right;">
                                            <t t-esc="'%.2f' % (o.igst_total or igst_amount or 0)"/>
                                        </span>
                                    </div>
                                    
                                    <div>
                                        <strong>Freight Charges:</strong>
                                        <span style="float: right;">
                                            <t t-if="o.freight_charge">
                                                <span t-esc="'%.2f' % o.freight_charge"/>
                                            </t>
                                            <t t-if="not o.freight_charge and o.picking_id and o.picking_id.sale_id">
                                                <span t-if="o.picking_id.sale_id.freight_charge_x" 
                                                      t-esc="'%.2f' % o.picking_id.sale_id.freight_charge_x"/>
                                                <span t-if="not o.picking_id.sale_id.freight_charge_x">0.00</span>
                                            </t>
                                            <t t-if="not o.freight_charge and (not o.picking_id or not o.picking_id.sale_id)">
                                                0.00
                                            </t>
                                        </span>
                                    </div>

                                    <div>
                                        <strong>Packing &amp; Development Charges:</strong>
                                        <span style="float: right;">
                                            <t t-if="o.packing_charge">
                                                <span t-esc="'%.2f' % o.packing_charge"/>
                                            </t>
                                            <t t-if="not o.packing_charge and o.picking_id and o.picking_id.sale_id">
                                                <span t-if="o.picking_id.sale_id.packing_charge_x" 
                                                      t-esc="'%.2f' % o.picking_id.sale_id.packing_charge_x"/>
                                                <span t-if="not o.picking_id.sale_id.packing_charge_x">0.00</span>
                                            </t>
                                            <t t-if="not o.packing_charge and (not o.picking_id or not o.picking_id.sale_id)">
                                                0.00
                                            </t>
                                        </span>
                                    </div>
                                    
                                    <!-- Grand Total Calculation -->
                                    <t t-set="freight" t-value="o.freight_charge or (o.picking_id and o.picking_id.sale_id and o.picking_id.sale_id.freight_charge_x) or 0"/>
                                    <t t-set="packing" t-value="o.packing_charge or (o.picking_id and o.picking_id.sale_id and o.picking_id.sale_id.packing_charge_x) or 0"/>
                                    <t t-set="amount_total" t-value="(o.picking_id and o.picking_id.sale_id and o.picking_id.sale_id.amount_total) or 0"/>
                                    <t t-set="grand_total" t-value="amount_total + freight + packing"/>
                                    
                                    <div style="margin-top: 8px; font-size: 14px;">
                                        <strong>Grand Total Amount:</strong>
                                        <span style="float: right;">
                                            <t t-if="o.grand_total">
                                                <span t-field="o.grand_total" 
                                                      t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                            </t>
                                            <t t-if="not o.grand_total">
                                                <span t-esc="'%.2f' % grand_total"/>
                                            </t>
                                        </span>
                                    </div>
                                </td>
                            </tr>

                            <!-- AMOUNT IN WORDS & SIGNATURE -->
                            <tr class="footer-section">
                                <td colspan="5" style="vertical-align: top;">
                                    <div class="label-bold" style="margin-bottom: 5px;">
                                        Total Amount In Words:
                                    </div>
                                    <div>
                                        <t t-if="o.amount_in_words">
                                            <span t-esc="o.amount_in_words"/>
                                        </t>
                                        <t t-if="not o.amount_in_words and o.picking_id and o.picking_id.sale_id">
                                            <t t-set="amount_text" t-value="o.picking_id.sale_id.currency_id.amount_to_text(grand_total)"/>
                                            <span t-esc="amount_text"/>
                                        </t>
                                    </div>
                                </td>

                                <td colspan="5" class="text-center signature-area">
                                    <div class="label-bold" style="font-size: 14px;">For Duisport Packing Logistics India Pvt. Ltd.</div>
                                    <div style="margin-top: 50px;">
                                        <div class="label-bold">Authorised Signatory</div>
                                    </div>
                                </td>
                            </tr>

                            <!-- TERMS & CONDITIONS -->
                            <tr class="footer-section">
                                <td colspan="10" class="small-text">
                                    <div class="label-bold" style="margin-bottom: 5px;">Terms &amp; Conditions:</div>
                                    <div>1. Acknowledgement of the Delivery Challan is must with sign and stamp.</div>
                                    <div>2. This delivery challan is valid for the items listed herein and for the specific transaction mentioned only.</div>
                                    <div>3. The recipient has the right to inspect the delivered items upon receipt and notify discrepancies immediately.</div>
                                    <div>4. Prices mentioned on the delivery challan are the final prices and subsequent PO should be issued on same rates.</div>
                                    <div>5. Delivery challans issued only to facilitate buyer for faster delivery and invoice will be issued within 3–4 working days.</div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- Report Action Definition -->
    <record id="action_report_delivery_challan_ewaybill" model="ir.actions.report">
        <field name="name">Delivery Challan</field>
        <field name="model">delivery.challan.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">all_reports_full.report_delivery_challan</field>
        <field name="report_file">all_reports_full.report_delivery_challan</field>
        <field name="binding_model_id" ref="model_delivery_challan_report"/>
        <field name="binding_type">report</field>
        <field name="print_report_name">'Delivery_Challan_%s' % (object.picking_id.name if object.picking_id else object.name or 'Challan')</field>
        <field name="paperformat_id" ref="paperformat_delivery_challan"/>
    </record>

</odoo>